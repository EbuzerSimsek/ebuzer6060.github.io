//
//  ShareMountainCardView.swift
//  Mountain Identifier
//
//  Created by Ebuzer on 16.02.2025.
//

import SwiftUI

struct ShareMountainCardView: View {
    let mountain: MountainResponse
    let mountainImage: UIImage
    
    var body: some View {
        ZStack {
            Color.black
            
            // Dağ fotoğrafı - Tam ekran
            Image("shareMountain")
                .resizable()
                .aspectRatio(contentMode: .fit)
                .cornerRadius(20)
                .frame(width: 1080, height: 600)
                .overlay(
                    // Alt gradient overlay - en alttan yukarı
                    LinearGradient(
                        colors: [
                            .black,
                            .black.opacity(0.8),
                            .black.opacity(0.6),
                            .black.opacity(0.4),
                            .black.opacity(0.2),
                            .clear
                        ],
                        startPoint: .bottom,
                        endPoint: .top
                    )
                )
                
            
            // Alt gradient
            VStack {
                
                Spacer()
                
                VStack(spacing: 16) {
                    // Dağ ismi
                    Text(mountain.mountainName)
                        .font(.system(size: 35, weight: .bold))
                        .shadow(color: Color.black, radius:40)
                        .foregroundColor(.white)
                        .padding(.trailing,70)
                    
                    // Açıklama
                    Text("Everest is the heighest mountain in the world.")
                        .font(.system(size: 20))
                        .shadow(color: Color.black, radius:40)
                        .foregroundColor(.white)
                    
                    // Rakım ve konum
                    HStack(spacing: 20) {
                        HStack(spacing: 4) {
                            Image(systemName: "arrow.up.circle.fill")
                                .foregroundColor(.green)
                                .font(.system(size: 16))
                            Text(mountain.elevation)
                                .font(.system(size: 16, weight: .medium))
                                .foregroundColor(.white)
                        }
                        
                        HStack(spacing: 4) {
                            Image(systemName: "location.fill")
                                .foregroundColor(.blue)
                                .font(.system(size: 16))
                            Text(mountain.location)
                                .font(.system(size: 16, weight: .medium))
                                .foregroundColor(.white)
                        }
                    }
                    .shadow(color: Color.black, radius: 20)
                    
                  
                    
                    // Marka
                    HStack(spacing: 10) {
                        Image("icon")
                            .resizable()
                            .frame(width: 40, height: 40)
                            .foregroundStyle(.white)
                            .cornerRadius(8)
                        
                        Text("PeakLens")
                            .font(.system(size: 24, weight: .bold))
                            .foregroundColor(.white)
                    }
                }.frame(width: 320)
                    .padding(.bottom,160)
                
            }
            
        }.ignoresSafeArea()
        
    }
}

struct ShareMountainCardView_Previews: PreviewProvider {
    static var previews: some View {
        let mockMountain = MountainResponse(
            confidence: 95,
            mountainName: "Mount Everest",
            location: "Nepal/Tibet Border",
            elevation: "8,848.86 m (29,031.7 ft)",
            mountainRange: "Himalayas",
            country: "Nepal/China",
            reasoning: "The distinctive pyramid shape and snow-covered peak with visible glacial features are characteristic of Mount Everest, the world's highest mountain.",
            difficulty: "Extreme - Requires mountaineering experience",
            bestTimeToVisit: "April-May, September-October",
            facts: [
                "World's highest mountain above sea level",
                "Known as Sagarmatha in Nepali and Chomolungma in Tibetan",
                "First successfully climbed by Edmund Hillary and Tenzing Norgay in 1953"
            ],
            coordinates: MountainResponse.Coordinates(latitude: 27.9881, longitude: 86.9250),
            firstAscent: MountainResponse.FirstAscent(
                year: "1953",
                climbers: ["Edmund Hillary", "Tenzing Norgay"],
                route: "South Col Route"
            ),
            climate: MountainResponse.Climate(
                temperature: "-19°C to -36°C",
                precipitation: "Very low",
                windSpeed: "Up to 200 km/h",
                seasonality: "Extreme seasonal variations"
            ),
            geology: MountainResponse.Geology(
                rockType: "Limestone and shale",
                formation: "Tethys Sea sediments",
                age: "50-60 million years",
                specialFeatures: ["Pyramid shape", "Glacial features", "High altitude"]
            ),
            wildlife: ["Snow leopard", "Himalayan tahr", "Red panda"],
            routes: [
                MountainResponse.ClimbingRoute(
                    name: "South Col Route",
                    difficulty: "Extreme",
                    duration: "60-70 days",
                    description: "Most popular route via South Col"
                )
            ],
            safety: MountainResponse.SafetyInfo(
                risks: ["Altitude sickness", "Avalanches", "Extreme weather", "Crevasses"],
                precautions: ["Acclimatization", "Weather monitoring", "Proper equipment", "Experienced guides"],
                emergencyInfo: "Rescue operations extremely difficult above 8,000m",
                rescueAvailability: "Limited helicopter rescue up to 6,000m"
            ),
            equipment: ["Oxygen tanks", "Crampons", "Ice axes", "High-altitude tents", "Down suits"],
            permits: ["Nepal climbing permit", "Tibet travel permit", "Environmental fee"],
            nearbyAttractions: ["Sagarmatha National Park", "Namche Bazaar", "Tengboche Monastery"],
            culturalSignificance: "Sacred mountain in both Nepali and Tibetan cultures, known as 'Mother of the World'",
            weather: MountainResponse.WeatherInfo(
                currentConditions: "Extreme cold with high winds",
                forecast: "Unpredictable weather patterns",
                visibility: "Often poor due to clouds and storms",
                avalancheRisk: "High risk, especially in spring"
            )
        )
        
        return ShareMountainCardView(
            mountain: mockMountain,
            mountainImage: UIImage(systemName: "mountain.2.fill")!
        )
        .previewLayout(.fixed(width: 1080, height: 1920))
    }
}
